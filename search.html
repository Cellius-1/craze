<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Volunet - Search</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Radio+Canada+Big:ital,wght@0,400..700;1,400..700&family=Six+Caps&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <h1>Search</h1>
    </div>
    <div class="navbar-container">
        <div class="navigation">
            <a href="login.html">LOG OUT</a>
            <a href="home.html">HOME</a>
            <a href="search.html" class="active">SEARCH</a>
            <a href="profile.html">PROFILE</a>
        </div>
        <div class="welcome-text-container">
            <span id="welcomeText" class="welcome-text"></span>
        </div>
    </div>
    <div class="login-container homepage">
    <button onclick="createServiceOpportunity(event)" class="custom-submit">Request Volunteers</button>
    <div id="details"></div>
    <script>
        function createServiceOpportunity(event) {
            event.preventDefault();
            window.location.href = "serviceOpportunity.html";
        }

        var username = localStorage.getItem("username");

        document.addEventListener("DOMContentLoaded", function() {
            if (username) {
                var welcomeText = document.getElementById("welcomeText");
                welcomeText.textContent = "Welcome, " + username;
            }
        });
        document.addEventListener("DOMContentLoaded", function() {
            var data = JSON.parse(localStorage.getItem("serviceData")) || [];
            var detailsDiv = document.getElementById("details");
            if (data.length > 0) {
                data.reverse();
                detailsDiv.innerHTML = data.map(function(item) {
                    return "<p>Name: " + item.name + "</p>" +
                            "<p>Address: " + item.address + "</p>" +
                            "<p>Time: " + item.time + "</p>" +
                            "<p>Date: " + item.date + "</p>" +
                            "<p>Description: " + item.description + "</p>" + 
                            `<iframe
                                width="600"
                                height="450"
                                style="border:0"
                                loading="lazy"
                                allowfullscreen
                                referrerpolicy="no-referrer-when-downgrade"
                                src="https://www.google.com/maps/embed/v1/place?key=AIzaSyCHJTgseMnVwDvJyvKCQXjPlUCvPhDS8X0&q=${encodeURI(address)}">
                            </iframe>`;
                }).join("");
            }
        });
    </script>
</body>
</html>
